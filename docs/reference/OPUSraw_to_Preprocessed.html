<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Load and pre-process OPUS raw spectra files (file.O) — OPUSraw_to_Preprocessed • TUBAFsoilFunctions</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Load and pre-process OPUS raw spectra files (file.O) — OPUSraw_to_Preprocessed"><meta property="og:description" content="This function loads a set of raw opus spectra files into R, processes them into a nested tibble format (propectr-friendly),
and applies several pre-processing techniques.
"><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">TUBAFsoilFunctions</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Load and pre-process OPUS raw spectra files (file.O)</h1>

    <div class="hidden name"><code>OPUSraw_to_Preprocessed.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function loads a set of raw opus spectra files into R, processes them into a nested tibble format (propectr-friendly),
and applies several pre-processing techniques.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">OPUSraw_to_Preprocessed</span><span class="op">(</span></span>
<span>  folder <span class="op">=</span> <span class="st">"../../1_raw_scans/scans_main"</span>,</span>
<span>  save_location <span class="op">=</span> <span class="st">"./temp"</span>,</span>
<span>  save <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  save_raw <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  return <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  id_string_location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">400</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">7500</span>,</span>
<span>  reload <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  make_upper <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  date_splits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2024-10-07"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-folder">folder<a class="anchor" aria-label="anchor" href="#arg-folder"></a></dt>
<dd><p>a folder containing the raw spectra</p></dd>


<dt id="arg-save-location">save_location<a class="anchor" aria-label="anchor" href="#arg-save-location"></a></dt>
<dd><p>where should the produced files be saved</p></dd>


<dt id="arg-save">save<a class="anchor" aria-label="anchor" href="#arg-save"></a></dt>
<dd><p>logical: should the final output be saved as RDS in 'save_location'?</p></dd>


<dt id="arg-save-raw">save_raw<a class="anchor" aria-label="anchor" href="#arg-save-raw"></a></dt>
<dd><p>logical: should the loaded raw spectra be saved as RDS in 'save_location'?
This can be used to reload the raw spectra when calling this function again, which can save quite some time
when loading a large amount of spectra</p></dd>


<dt id="arg-return">return<a class="anchor" aria-label="anchor" href="#arg-return"></a></dt>
<dd><p>logical: should the final output be returned by the function? Set T, when using in pipeline, or assigning
to variable. Otherwise set F, or output will be printed in console and cause lag.</p></dd>


<dt id="arg-id-string-location">id_string_location<a class="anchor" aria-label="anchor" href="#arg-id-string-location"></a></dt>
<dd><p>Which characters in the sample column strings are the unique sample identifeirs?
Provide a vetor of start and end position. E.g., default for BDF spec: Full file names are:
"BDF-XXXX-y....., with XXXX being the sample name. Therefore, default is set to c(5,8)</p></dd>


<dt id="arg-reload">reload<a class="anchor" aria-label="anchor" href="#arg-reload"></a></dt>
<dd><p>Is a 'raw_spc' RDS file stored in 'save_location' from a previous run you want to load instead of reading
raw opus files?</p></dd>


<dt id="arg-make-upper">make_upper<a class="anchor" aria-label="anchor" href="#arg-make-upper"></a></dt>
<dd><p>Sample names are converted to fully uppercase (removes case typos). Parametrisation for compatability (option to turn it off)</p></dd>


<dt id="arg-date-splits">date_splits<a class="anchor" aria-label="anchor" href="#arg-date-splits"></a></dt>
<dd><p>Vector of dates in string format uses to split all raw opus files into groupes for read-in. This is used because recalibration of the FT wavenumbers
introduces a small shift which hinders direct merge of spectra by wavenumbers. Subsets are remerged after rs to 1 cm-1.
Date_split string format should conform to default Posixct format. Either "YYYY-MM-DD" or "YYYY-mm-dd HH:MM:SS".</p></dd>


<dt id="arg-spc-cols">spc_cols<a class="anchor" aria-label="anchor" href="#arg-spc-cols"></a></dt>
<dd><p>Locates the raw spc cols in the aggregated raw spectra dataframe. Default is for
scans from 7500-400 cm-1 at 1 cm-1 (actually at about 0.6 cm-1), yielding 13860 spc columns.
You can input either the total No. of spc_cols (e.g. 13860), the start and end index of the spc cols (c(5,13864)),
or the full vector of spc col indices (c(5:13864)).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>If save_raw=T and reload=F, the initially read-in raw opus files are saved after gathering  (details see simplerspec documentation) them as a rds object in save_location as raw_spc.</p>
<p>If save=T, the final object containing the differently pre-processed spectra sets is saved in save_location as spc_data.</p>
<p>If return=T, the final object containing the differently pre-processed spectra is</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sean Adam.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

