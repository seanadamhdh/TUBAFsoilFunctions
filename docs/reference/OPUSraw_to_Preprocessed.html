<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Load and pre-process OPUS raw spectra files (file.O) — OPUSraw_to_Preprocessed • TUBAFsoilFunctions</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Load and pre-process OPUS raw spectra files (file.O) — OPUSraw_to_Preprocessed"><meta name="description" content="This function loads a set of raw opus spectra files into R, processes them into a nested tibble format (propectr-friendly),
and applies several pre-processing techniques.
"><meta property="og:description" content="This function loads a set of raw opus spectra files into R, processes them into a nested tibble format (propectr-friendly),
and applies several pre-processing techniques.
"><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">TUBAFsoilFunctions</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Load and pre-process OPUS raw spectra files (file.O)</h1>

      <div class="d-none name"><code>OPUSraw_to_Preprocessed.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function loads a set of raw opus spectra files into R, processes them into a nested tibble format (propectr-friendly),
and applies several pre-processing techniques.
<a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">OPUSraw_to_Preprocessed</span><span class="op">(</span></span>
<span>  folder <span class="op">=</span> <span class="st">"../../1_raw_scans/scans_main"</span>,</span>
<span>  save_location <span class="op">=</span> <span class="st">"./temp"</span>,</span>
<span>  save <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  save_raw <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  return <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  id_string_location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">400</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">7500</span>,</span>
<span>  reload <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  make_upper <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  date_splits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2024-10-07"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-folder">folder<a class="anchor" aria-label="anchor" href="#arg-folder"></a></dt>
<dd><p>a folder containing the raw spectra</p></dd>


<dt id="arg-save-location">save_location<a class="anchor" aria-label="anchor" href="#arg-save-location"></a></dt>
<dd><p>where should the produced files be saved</p></dd>


<dt id="arg-save">save<a class="anchor" aria-label="anchor" href="#arg-save"></a></dt>
<dd><p>logical: should the final output be saved as RDS in 'save_location'?</p></dd>


<dt id="arg-save-raw">save_raw<a class="anchor" aria-label="anchor" href="#arg-save-raw"></a></dt>
<dd><p>logical: should the loaded raw spectra be saved as RDS in 'save_location'?
This can be used to reload the raw spectra when calling this function again, which can save quite some time
when loading a large amount of spectra</p></dd>


<dt id="arg-return">return<a class="anchor" aria-label="anchor" href="#arg-return"></a></dt>
<dd><p>logical: should the final output be returned by the function? Set T, when using in pipeline, or assigning
to variable. Otherwise set F, or output will be printed in console and cause lag.</p></dd>


<dt id="arg-id-string-location">id_string_location<a class="anchor" aria-label="anchor" href="#arg-id-string-location"></a></dt>
<dd><p>Which characters in the sample column strings are the unique sample identifeirs?
Provide a vetor of start and end position. E.g., default for BDF spec: Full file names are:
"BDF-XXXX-y....., with XXXX being the sample name. Therefore, default is set to c(5,8)</p></dd>


<dt id="arg-reload">reload<a class="anchor" aria-label="anchor" href="#arg-reload"></a></dt>
<dd><p>Is a 'raw_spc' RDS file stored in 'save_location' from a previous run you want to load instead of reading
raw opus files?</p></dd>


<dt id="arg-make-upper">make_upper<a class="anchor" aria-label="anchor" href="#arg-make-upper"></a></dt>
<dd><p>Sample names are converted to fully uppercase (removes case typos). Parametrisation for compatability (option to turn it off)</p></dd>


<dt id="arg-date-splits">date_splits<a class="anchor" aria-label="anchor" href="#arg-date-splits"></a></dt>
<dd><p>Vector of dates in string format uses to split all raw opus files into groupes for read-in. This is used because recalibration of the FT wavenumbers
introduces a small shift which hinders direct merge of spectra by wavenumbers. Subsets are remerged after rs to 1 cm-1.
Date_split string format should conform to default Posixct format. Either "YYYY-MM-DD" or "YYYY-mm-dd HH:MM:SS".</p></dd>


<dt id="arg-spc-cols">spc_cols<a class="anchor" aria-label="anchor" href="#arg-spc-cols"></a></dt>
<dd><p>Locates the raw spc cols in the aggregated raw spectra dataframe. Default is for
scans from 7500-400 cm-1 at 1 cm-1 (actually at about 0.6 cm-1), yielding 13860 spc columns.
You can input either the total No. of spc_cols (e.g. 13860), the start and end index of the spc cols (c(5,13864)),
or the full vector of spc col indices (c(5:13864)).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If save_raw=T and reload=F, the initially read-in raw opus files are saved after gathering  (details see simplerspec documentation) them as a rds object in save_location as raw_spc.</p>
<p>If save=T, the final object containing the differently pre-processed spectra sets is saved in save_location as spc_data.</p>
<p>If return=T, the final object containing the differently pre-processed spectra is</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sean Adam.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

